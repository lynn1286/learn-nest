创建两个模块，`common` 和 `cats` 。



### 模块导出

在 `CommonModule` 里指定 `exports` 的 `provider`：

```ts
import { Module } from '@nestjs/common';
import { CommonService } from './common.service';
import { CommonController } from './common.controller';

@Module({
  controllers: [CommonController],
  providers: [CommonService],
  exports: [CommonService], // 导出模块
})
export class CommonModule {}

```



### 模块导入

在 `CatsModule` 里 `imports` 刚刚导出`CommonModule` :

```ts
import { Module } from '@nestjs/common';
import { CatsService } from './cats.service';
import { CatsController } from './cats.controller';
import { CommonModule } from 'src/common/common.module';

@Module({
  imports: [CommonModule],
  controllers: [CatsController],
  providers: [CatsService],
})
export class CatsModule {}

```



这样就可以在 `CatsModule` 内使用 `CommonService`了：

```ts
import { Inject, Injectable } from '@nestjs/common';
import { CreateCatDto } from './dto/create-cat.dto';
import { UpdateCatDto } from './dto/update-cat.dto';
import { CommonService } from 'src/common/common.service';

@Injectable()
export class CatsService {
  @Inject()
  private readonly commonService: CommonService;

  create(createCatDto: CreateCatDto) {
    return 'This action adds a new cat';
  }

  findAll() {
    return this.commonService.findAll();
  }

  findOne(id: number) {
    return `This action returns a #${id} cat`;
  }

  update(id: number, updateCatDto: UpdateCatDto) {
    return `This action updates a #${id} cat`;
  }

  remove(id: number) {
    return `This action removes a #${id} cat`;
  }
}
```



### 全局模块

新增一个`global`模块，将它设置成全局模块：

```ts
import { Global, Module } from '@nestjs/common';
import { GlobalService } from './global.service';
import { GlobalController } from './global.controller';

@Global() // 设置全局模块
@Module({
  controllers: [GlobalController],
  providers: [GlobalService],
  exports: [GlobalService], // 将 GlobalService 导出
})
export class GlobalModule {}

```

这样就是一个全局模块，在任何地方都可以使用 `GlobalService` ; 全局模块推荐只能有一个，不能过多的使用。



### 生命周期



